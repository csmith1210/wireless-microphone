<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="Description" content="Turn any device into a wireless microphone">
  <title>ðŸŽ™ Web Microphone</title>
  <script src="dist/ipfs.min.js" defer></script>
  <script src="dist/bundle.min.js" defer></script>
  <script src="https://kit.fontawesome.com/90bede2e6a.js" crossorigin="anonymous" defer></script>
  <script src="https://ackee.appsome.dev/tracker.js" data-ackee-server="https://ackee.appsome.dev" data-ackee-domain-id="6c323544-6b6f-42ec-8a80-51ef8abababb" async></script>
</head>
<body>
  <main x-data="webmic.root()" x-init="init" class="container">
    <div class="segmented-control">
      <template x-for="m in modes">
        <div>
          <input x-model="mode" type="radio" :value="m" :id="m" x-on:change="tabChanged($event.target.value)" />
          <label :for="m" :class="`tab-${m}`">
            <p x-text="m"></p>
          </label>
        </div>
      </template>
      <div :class="`segmented-control__color selected-${mode}`"></div>
    </div>

    <template x-if="mode == 'microphone'">
      <div x-data="webmic.microphone()" class="microphone">
        <div class="circle">
          <input type="checkbox" x-on:change="applyStreamStatus($event.target.checked)" id="streaming" />
          <label for="streaming">
            <i class="material-icons">mic_none</i>
          </label>
          <span class="circle__back-1"></span>
          <span class="circle__back-2"></span>
        </div>
        <div class="chip">
          <div class="chip__icon">
            <i class="material-icons" x-text="stateIcon"></i>
          </div>
          <template x-if="state == STATES.IDLE">
            <p>Tap above to start streaming</p>
          </template>
          <template x-if="state == STATES.CONNECTING">
            <p>Connecting...</p>
          </template>
          <template x-if="state == STATES.LOOKING_FOR_RECEIVERS">
            <p>Looking for receivers...</p>
          </template>
          <template x-if="state == STATES.STREAMING">
            <p>Streaming to <strong x-text="target"></strong></p>
          </template>
        </div>
      </div>
    </template>
    <template x-if="mode == 'speaker'">
      <div x-data="webmic.speaker()" class="speaker">
        <div class="circle">
          <input type="checkbox" x-on:change="applyListenStatus($event.target.checked)" id="listening" />
          <label for="listening">
            <i class="material-icons">volume_up</i>
          </label>
          <span class="circle__back-1"></span>
          <span class="circle__back-2"></span>
        </div>
        <div class="chip">
          <div class="chip__icon">
            <i class="material-icons" x-text="stateIcon"></i>
          </div>
          <template x-if="state == STATES.IDLE">
            <p>Tap above to start listening</p>
          </template>
          <template x-if="state == STATES.CONNECTING">
            <p>Connecting...</p>
          </template>
          <template x-if="state == STATES.LOOKING_FOR_SENDERS">
            <p>Looking for senders...</p>
          </template>
          <template x-if="state == STATES.LISTENING">
            <p>Listening from <strong x-text="source"></strong></p>
          </template>
        </div>
        <audio></audio>
      </div>
    </template>

    <div class="icon">
      <a href="https://github.com/suda/webmic" target="_blank" rel="noopener" title="Source code on GitHub">
        <div class="icon__github">
          <i class="fab fa-github"></i>
        </div>
      </a>
      <a href="https://twitter.com/suda" target="_blank" rel="noopener" title="Twitter">
        <div class="icon__twitter">
          <i class="fab fa-twitter"></i>
        </div>
      </a>
      <a href="https://www.producthunt.com/@suda" target="_blank" rel="noopener" title="Product Hunt">
        <div class="icon__help">
          <i class="fab fa-product-hunt"></i>
        </div>
      </a>
    </div>
  </main>
</body>
</html>